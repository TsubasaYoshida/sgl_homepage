<h2 class="text-center font-weight-bold my-sm-5" style="font-size: 24px">大会日程</h2>

<!--  pc  -->
<div class="d-none d-sm-block">
  <%= form_tag({controller: :nittei, action: :find}, method: :get) do %>
    <div class="row" style="padding-left: 5px; padding-right: 5px">
      <div class="col-sm-1"></div>
      <div class="col-sm-3">
        <div class="form-group">
          <%= select_tag :key_year, options_for_select(Constants.get_year_list, @selected_year), class: 'form-control' %>
        </div>
      </div>
      <div class="col-sm-3">
        <div class="form-group">
          <%= select_tag :key_season, options_for_select(['春季', '秋季'], @selected_season), class: 'form-control' %>
        </div>
      </div>
      <div class="col-sm-3">
        <div class="form-group">
          <%= select_tag :key_event,
                         options_for_select(['1部リーグ戦', '2部リーグ戦', '3部リーグ戦', '入替戦', 'トーナメント'], @selected_event),
                         class: 'form-control' %>
        </div>
      </div>
      <div class="col-sm-2">
        <%= submit_tag '表示', class: 'btn btn-default' %>
      </div>
    </div>
  <% end %>
</div>

<!--  sp  -->
<div class="d-sm-none d-block">
  <%= form_tag({controller: :nittei, action: :find}, method: :get) do %>
    <nav class="navbar navbar-expand-lg navbar-light pt-2">
      <button type="button" class="navbar-toggler btn-block text-center"
              data-toggle="collapse" data-target="#search"
              aria-controls="Navber" aria-expanded="false" aria-label="ナビゲーションバー">
        他の大会をみる
      </button>
      <div class="collapse navbar-collapse" id="search">
        <div class="py-2"></div>
        <div class="row">
          <div class="col-sm-1"></div>
          <div class="col-sm-3">
            <div class="form-group">
              <%= select_tag :key_year, options_for_select(Constants.get_year_list, @selected_year), class: 'form-control' %>
            </div>
          </div>
          <div class="col-sm-3">
            <div class="form-group">
              <%= select_tag :key_season, options_for_select(['春季', '秋季'], @selected_season), class: 'form-control' %>
            </div>
          </div>
          <div class="col-sm-3">
            <div class="form-group">
              <%= select_tag :key_event,
                             options_for_select(['1部リーグ戦', '2部リーグ戦', '3部リーグ戦', '入替戦', 'トーナメント'], @selected_event),
                             class: 'form-control' %>
            </div>
          </div>
          <div class="col-sm-2">
            <%= submit_tag '表示', class: 'btn btn-default' %>
          </div>
        </div>
      </div>
    </nav>
  <% end %>
</div>

<div class="py-2"></div>

<h3 class="text-center font-weight-bold mb-2 mb-sm-3 mt-0 mt-sm-3" style="font-size: 20px">
  <%= @selected_year %>年度<%= @selected_season %><%= @selected_event %>
</h3>

<% if @error_msg %>

  <div class="py-2"></div>

  <div class="text-center"><%= @error_msg %></div>

<% else %>

  <% if @oc_date %>
    <div class="text-center font-weight-bold">
      開会式：
      <%= l @oc_date, format: :oc_date %><%= " " %><%= l @oc_time, format: :oc_time %>
    </div>
  <% end %>

  <% if @selected_event == '入替戦' %>
    <div class="text-center font-weight-bold">
      ※二戦先取制
    </div>
  <% end %>

  <!--  tweet button start  -->
  <div class="text-center mt-3">
    <a href="https://twitter.com/share?ref_src=twsrc%5Etfw"
       class="twitter-share-button"
       data-show-count="false"
       data-text="札幌学生野球連盟-大会日程
<%= @selected_year %>年度<%= @selected_season %><%= @selected_event %>
#盛り上がれ札六
">Tweet</a>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
  </div>
  <!--  tweet button end  -->

  <div class="row" style="padding-left: 5px; padding-right: 5px">

    <% if @selected_event.include?('リーグ戦') %>
      <% 2.times do |n| %>
        <% nittei_infos_i = "@nittei_infos_#{n + 1}" %>

        <div class="col-sm-6 pt-3">
          <p class="text-center font-weight-bold" style="font-size: 16px">
            <%= n == 0 ? '第一節' : '第二節' %>
          </p>
          <div class="row">
            <div class="col-4 py-1 pr-1 text-right">
              <span class="badge badge-primary">三塁側先攻</span>
            </div>
            <div class="col-4"></div>
            <div class="col-4 py-1 pl-1">
              <span class="badge badge-danger">一塁側後攻</span>
            </div>
          </div>
          <%= render 'show', nittei_infos: instance_variable_get(nittei_infos_i) %>
        </div>

      <% end %>

    <% elsif @selected_event == '入替戦' %>

      <div class="col-12 pt-3">
        <div class="row">
          <div class="col-sm-2"></div>
          <div class="col-sm-8">
            <div class="row">
              <div class="col-4 py-1 pr-1 text-right">
                <span class="badge badge-primary">三塁側先攻</span>
              </div>
              <div class="col-4"></div>
              <div class="col-4 py-1 pl-1">
                <span class="badge badge-danger">一塁側後攻</span>
              </div>
            </div>
          </div>
          <div class="col-sm-2"></div>
        </div>
        <div class="row">
          <div class="col-sm-2"></div>
          <div class="col-sm-8">
            <%= render 'show', nittei_infos: @nittei_infos_irekae %>
            <% if @updated_at.present? %>
              <div class="text-right mt-4 mr-2">
                最終更新：<%= l @updated_at, format: :english %>
              </div>
            <% end %>
          </div>
          <div class="col-sm-2"></div>
        </div>
      </div>

    <% end %>

  </div>

  <% if @updated_at.present? && @selected_event != '入替戦' %>
    <div class="text-right mt-4 mr-2">
      最終更新：<%= l @updated_at, format: :english %>
    </div>
  <% end %>

<% end %>

<div class="mb-5"></div>
